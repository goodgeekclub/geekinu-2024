(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{321:function(e,t,s){Promise.resolve().then(s.bind(s,613))},7970:function(e,t,s){"use strict";s.d(t,{R:function(){return r}});var a=s(7362),n=s.n(a);n().configure({apiKey:"patPNpSEtu8FU43Vi.ad75eb0fb7a9bf22b3570b82bbe50f1f4d374b09ee26435b12b06be48687b648"});class r{async listRecords(){return this.base(this.table).select().all()}async updateRecord(e,t){return this.base(this.table).update(e,t)}constructor(e){this.baseId="appsK0JXjQOdY1fmx",this.base=n().base(this.baseId),this.table=e}}},613:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(7437),n=s(2265),r=s(7970);let o=new r.R("Coupon");async function i(e,t,s,a,n,r,i,c,d,u,f,x,b,p,h,m,g,y){e.preventDefault(),h(!1),m(!1),g(!1),y(!1);let w=c.find(e=>e.fields.code===t),v=d.find(e=>e.fields.c1===a&&e.fields.c2===n&&e.fields.c3===r&&e.fields.c4===i),j=d.find(e=>e.fields.c1===a&&e.fields.qrcodes===s),N=d.find(e=>e.fields.c2===n&&e.fields.qrcodes===s),C=d.find(e=>e.fields.c3===r&&e.fields.qrcodes===s),S=d.find(e=>e.fields.c4===i&&e.fields.qrcodes===s),k=d.find(e=>e.fields.qrcodes===s);if(w&&"UNUSED"===w.fields.status){if(await o.updateRecord(w.id,{status:"USED"}),u((await o.listRecords()).slice()),w&&"NORMAL"===w.fields.type)v&&k?b("Congratulations!! You have received a reward. \uD83C\uDF89\uD83C\uDF89"):(x("One or more applicant code inputs are incorrect. Please check the highlighted fields."),j||h(!0),N||m(!0),C||g(!0),S||y(!0));else if(w&&"SPECIAL"===w.fields.type){p("You got access to reveal your code :)");let e=[],t=k.fields.c1,s=k.fields.c2,a=k.fields.c3,n=k.fields.c4;switch(w.fields.class){case"bronze":e=l([t,s,a,n],1);break;case"silver":e=l([t,s,a,n],2);break;case"gold":e=l([t,s,a,n],3);break;case"platinum":e=[t,s,a,n]}f(e),v&&k?b("Congratulations!! You have received a reward. \uD83C\uDF89\uD83C\uDF89"):(j||h(!0),N||m(!0),C||g(!0),S||y(!0))}}else x("coupon code already used")}function l(e,t){let s=["","","",""],a=[0,1,2,3];for(let e=a.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[a[e],a[t]]=[a[t],a[e]]}for(let n=0;n<t;n++)s[a[n]]=e[a[n]];return s}new r.R("Applicant");var c=s(4839),d=s(6164);let u=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.m6)((0,c.W)(t))};function f(e){let{label:t,type:s,value:n,onChange:r,required:o,className:i}=e;return(0,a.jsxs)("div",{className:"mb-5",children:[(0,a.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:t}),(0,a.jsx)("input",{type:s,className:u("bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",i),value:n,onChange:r,required:o})]})}var x=s(9640);let b={shake:{x:[-2,2,-2,1,0],y:[-2,2,-2,1,0],rotate:[-3,3,-3,3,0],transition:{duration:.6,ease:[.25,.46,.45,.94]}}};function p(e){let{value:t,onChange:s,error:n}=e;return(0,a.jsx)(x.E.input,{type:"text",className:u("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",n?"border-red-500":"border-green-500"),maxLength:1,required:!0,value:t,onChange:s,animate:n?b.shake:{},transition:{duration:.3}})}function h(e){let{message:t,type:s,code1:r,code2:o,code3:i,code4:l,onClose:c}=e;return(0,n.useEffect)(()=>{let e=setTimeout(()=>{c()},1e4);return()=>clearTimeout(e)},[c]),(0,a.jsxs)(x.E.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{transitionEnd:{y:-10,opacity:0}},transition:{duration:.5},className:"mx-5 absolute top-0 flex flex-col ".concat("error"===s?"bg-red-400":"special"===s?"bg-yellow-400":"bg-green-400"," px-4 md:px-8 py-4 text-xs md:text-sm rounded-xl shadow-lg"),children:[t,"special"===s&&(0,a.jsxs)("div",{className:"mt-5 flex justify-between",children:[(0,a.jsx)("input",{type:"text",className:u("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"),maxLength:1,disabled:!0,value:r}),(0,a.jsx)("input",{type:"text",className:u("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"),maxLength:1,disabled:!0,value:o}),(0,a.jsx)("input",{type:"text",className:u("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"),maxLength:1,disabled:!0,value:i}),(0,a.jsx)("input",{type:"text",className:u("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100"),maxLength:1,disabled:!0,value:l})]})]})}var m=()=>(0,a.jsxs)(x.E.button,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{transitionEnd:{y:-10,opacity:0}},transition:{duration:.5},className:"absolute top-0 bg-indigo-500 text-white font-bold px-4 md:px-8 py-4 rounded-xl inline-flex items-center shadow-lg",disabled:!0,children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-3 text-white",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4h-4z"})]}),"Processing..."]});let g=new r.R("Coupon"),y=new r.R("Applicant");function w(){let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[o,l]=(0,n.useState)([]),[c,d]=(0,n.useState)(""),[u,x]=(0,n.useState)(""),[b,w]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[N,C]=(0,n.useState)(""),[S,k]=(0,n.useState)(""),[E,D]=(0,n.useState)(""),[R,q]=(0,n.useState)(""),[F,L]=(0,n.useState)(""),[Y,A]=(0,n.useState)(!1),[_,O]=(0,n.useState)(!1),[P,I]=(0,n.useState)(!1),[M,U]=(0,n.useState)(!1),[z,K]=(0,n.useState)(!1);(0,n.useEffect)(()=>{g.listRecords().then(e=>t(e.slice())),y.listRecords().then(e=>r(e.slice()))},[]);let T=e=>t=>{e(t.target.value)},B=async a=>{K(!0),await i(a,c,u,b,v,N,S,e,s,t,l,D,q,L,A,O,I,U),K(!1)};return(0,a.jsx)("div",{className:"w-full h-screen flex justify-center bg-white text-black",children:(0,a.jsxs)("div",{className:"w-[500px] h-full px-5 flex flex-col items-center justify-center space-y-5",children:[(0,a.jsxs)("form",{onSubmit:B,className:"w-full flex flex-col ",children:[(0,a.jsx)(f,{label:"Your ID",type:"number",value:u,onChange:T(x),required:!0,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"}),(0,a.jsx)(f,{label:"Your Coupon",type:"text",value:c,onChange:T(d),required:!0}),(0,a.jsxs)("div",{className:"mb-5 flex flex-col justify-center",children:[(0,a.jsx)("label",{htmlFor:"Applicant1",className:"block mb-2 text-sm font-medium text-gray-900",children:"Your Number"}),(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)(p,{value:b,onChange:T(w),error:Y}),(0,a.jsx)(p,{value:v,onChange:T(j),error:_}),(0,a.jsx)(p,{value:N,onChange:T(C),error:P}),(0,a.jsx)(p,{value:S,onChange:T(k),error:M})]})]}),(0,a.jsx)("button",{type:"submit",className:"mt-5 w-max text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm  px-5 py-2.5 text-center shadow-lg",children:"Submit"})]}),z?(0,a.jsx)(m,{}):(0,a.jsxs)(a.Fragment,{children:[E&&(0,a.jsx)(h,{message:E,type:"error",onClose:()=>D("")}),R&&(0,a.jsx)(h,{message:R,type:"success",onClose:()=>q("")}),F&&(0,a.jsx)(h,{message:F,type:"special",code1:o[0],code2:o[1],code3:o[2],code4:o[3],onClose:()=>L("")})]})]})})}}},function(e){e.O(0,[362,265,971,23,744],function(){return e(e.s=321)}),_N_E=e.O()}]);