(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{321:function(e,t,s){Promise.resolve().then(s.bind(s,4279))},7970:function(e,t,s){"use strict";s.d(t,{R:function(){return a}});var r=s(7362),n=s.n(r);n().configure({apiKey:"patPNpSEtu8FU43Vi.ad75eb0fb7a9bf22b3570b82bbe50f1f4d374b09ee26435b12b06be48687b648"});class a{async listRecords(){return this.base(this.table).select().all()}async updateRecord(e,t){return this.base(this.table).update(e,t)}constructor(e){this.baseId="appsK0JXjQOdY1fmx",this.base=n().base(this.baseId),this.table=e}}},4279:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(7437),n=s(2265),a=s(7970);function l(e){let{label:t,type:s,value:n,onChange:a,required:l}=e;return(0,r.jsxs)("div",{className:"mb-5",children:[(0,r.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:t}),(0,r.jsx)("input",{type:s,className:"bg-gray-50 border border-gray-300 text-gray-900 text-base rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",value:n,onChange:a,required:l})]})}var i=s(4839),u=s(6164);let o=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,u.m6)((0,i.W)(t))};function c(e){let{value:t,onChange:s,error:n}=e;return(0,r.jsx)("input",{type:"text",className:o("w-12 md:w-14 h-12 md:h-14 text-center text-xl sm:text-2xl font-extrabold text-slate-900 bg-slate-100 border border-transparent hover:border-slate-200 appearance-none rounded p-4 outline-none focus:bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100",n?"border-red-500":"border-green-500"),maxLength:1,required:!0,value:t,onChange:s})}var d=s(9640);function f(e){let{message:t,type:s,onClose:a}=e;return(0,n.useEffect)(()=>{let e=setTimeout(()=>{a()},1e4);return()=>clearTimeout(e)},[a]),(0,r.jsx)(d.E.div,{initial:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:{transitionEnd:{y:-10,opacity:0}},transition:{duration:.5},className:"mx-5 absolute top-0 ".concat("error"===s?"bg-red-400":"bg-green-400"," px-4 md:px-8 py-4 text-xs md:text-sm rounded-xl shadow-lg"),children:t})}let b=new a.R("Coupon"),x=new a.R("Applicant");function m(){let[e,t]=(0,n.useState)([]),[s,a]=(0,n.useState)([]),[i,u]=(0,n.useState)(""),[o,d]=(0,n.useState)(""),[m,h]=(0,n.useState)(""),[p,g]=(0,n.useState)(""),[y,v]=(0,n.useState)(""),[j,w]=(0,n.useState)(""),[S,N]=(0,n.useState)(""),[C,E]=(0,n.useState)(""),[R,k]=(0,n.useState)(!1),[D,_]=(0,n.useState)(!1),[A,O]=(0,n.useState)(!1),[Y,q]=(0,n.useState)(!1);(0,n.useEffect)(()=>{b.listRecords().then(e=>t(e.slice())),x.listRecords().then(e=>a(e.slice()))},[]);let F=async r=>{r.preventDefault(),u(""),k(!1),_(!1),O(!1),q(!1);let n=e.find(e=>e.fields.code===i),a=s.find(e=>e.fields.c1===m&&e.fields.c2===p&&e.fields.c3===y&&e.fields.c4===j),l=s.find(e=>e.fields.c1===m&&e.fields.id===o),c=s.find(e=>e.fields.c2===p&&e.fields.id===o),d=s.find(e=>e.fields.c3===y&&e.fields.id===o),f=s.find(e=>e.fields.c4===j&&e.fields.id===o),x=s.find(e=>e.fields.id===o);n&&"UNUSED"===n.fields.status?(await b.updateRecord(n.id,{status:"USED"}),t((await b.listRecords()).slice()),"NORMAL"!==n.fields.type||(a&&x?E("Congratulations!! You have received a reward. \uD83C\uDF89\uD83C\uDF89"):(N("One or more applicant code inputs are incorrect. Please check the highlighted fields."),l||k(!0),c||_(!0),d||O(!0),f||q(!0)))):"SPECIAL"===n.fields.type||N("coupon code already used")},I=e=>t=>{e(t.target.value)};return(0,r.jsx)("div",{className:"w-full h-screen flex justify-center bg-white text-black",children:(0,r.jsxs)("div",{className:"w-[500px] h-full px-5 flex flex-col items-center justify-center space-y-5",children:[(0,r.jsxs)("form",{onSubmit:F,className:"w-full flex flex-col ",children:[(0,r.jsx)(l,{label:"Your ID",type:"number",value:o,onChange:I(d),required:!0}),(0,r.jsx)(l,{label:"Your Coupon",type:"text",value:i,onChange:I(u),required:!0}),(0,r.jsxs)("div",{className:"mb-5 flex flex-col justify-center",children:[(0,r.jsx)("label",{htmlFor:"Applicant1",className:"block mb-2 text-sm font-medium text-gray-900",children:"Your Number"}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsx)(c,{value:m,onChange:I(h),error:R}),(0,r.jsx)(c,{value:p,onChange:I(g),error:D}),(0,r.jsx)(c,{value:y,onChange:I(v),error:A}),(0,r.jsx)(c,{value:j,onChange:I(w),error:Y})]})]}),(0,r.jsx)("button",{type:"submit",className:"mt-5 w-max text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm  px-5 py-2.5 text-center shadow-lg",children:"Submit"})]}),S&&(0,r.jsx)(f,{message:S,type:"error",onClose:()=>N("")}),C&&(0,r.jsx)(f,{message:C,type:"success",onClose:()=>E("")})]})})}}},function(e){e.O(0,[362,265,971,23,744],function(){return e(e.s=321)}),_N_E=e.O()}]);