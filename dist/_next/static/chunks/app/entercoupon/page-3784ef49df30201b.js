(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[542],{1359:function(e,t,s){Promise.resolve().then(s.bind(s,9660))},6463:function(e,t,s){"use strict";var n=s(1169);s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})},9660:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(7437),a=s(2265),l=s(6463),r=s(7970);let i=new r.R("Coupon"),c=new r.R("Prize");function u(){let[e,t]=(0,a.useState)([]),[s,r]=(0,a.useState)([]),[u,o]=(0,a.useState)(""),d=(0,l.useRouter)();(0,a.useEffect)(()=>{i.listRecords().then(e=>t(e.slice())),c.listRecords().then(e=>r(e.slice()))},[]);let f=async()=>{let t=e.find(e=>e.fields.code===u);if(t&&"UNUSED"===t.fields.status){if(await i.updateRecord(t.id,{status:"USED"}),"SPECIAL"===t.fields.type){let e=await c.listRecords();if(0===e.length){alert("No unused prize codes available.");return}let t=Math.floor(Math.random()*e.length),s=e[t].fields.code;alert("Special code is: ".concat(s))}alert("Coupon code is correct!!."),d.push("/enternumber")}else alert("Coupon code is used or invalid.")};return(0,n.jsx)("div",{className:"w-full h-screen flex items-center justify-center bg-black",children:(0,n.jsxs)("div",{className:"w-[620px] px-5 flex flex-col items-center space-y-5",children:[(0,n.jsxs)("form",{action:"",className:"space-y-5 w-full flex flex-col items-center",children:[(0,n.jsx)("label",{htmlFor:"",children:"Enter Coupon"}),(0,n.jsx)("input",{className:"text-black max-w-full h-10",type:"text",value:u,onChange:e=>{o(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),f())}})]}),(0,n.jsx)("button",{className:"p-1 border",onClick:f,children:"Submit"})]})})}},7970:function(e,t,s){"use strict";s.d(t,{R:function(){return l}});var n=s(7362),a=s.n(n);a().configure({apiKey:"patPNpSEtu8FU43Vi.ad75eb0fb7a9bf22b3570b82bbe50f1f4d374b09ee26435b12b06be48687b648"});class l{async listRecords(){return this.base(this.table).select().all()}async updateRecord(e,t){return this.base(this.table).update(e,t)}constructor(e){this.baseId="appsK0JXjQOdY1fmx",this.base=a().base(this.baseId),this.table=e}}}},function(e){e.O(0,[362,971,23,744],function(){return e(e.s=1359)}),_N_E=e.O()}]);